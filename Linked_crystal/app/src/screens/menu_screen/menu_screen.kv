#:import ENV env.ENV

<MenuScreen>:
    FloatLayout:
        BoxLayout:
            orientation: 'vertical'
            padding: 20
            spacing: 10

            Label:
                text: "Bienvenido a la app"
                font_size: '24sp'
                size_hint_y: None
                height: self.texture_size[1]

            Button:
                text: "1. Cargar ROM (.gbc)"
                on_release: root.abrir_explorador()
                disabled: root.loading

            Label:
                id: label_rom
                text: "Ning√∫n ROM seleccionado"
                size_hint_y: None
                height: self.texture_size[1]

            Button:
                text: "2. Elegir servidor"
                on_release: root.elegir_servidor()
                disabled: not root.rom_cargado or root.loading

            Label:
                id: label_servidor
                text: "Servidor no elegido"
                size_hint_y: None
                height: self.texture_size[1]

            Button:
                text: "3. Jugar"
                on_release: root.iniciar_juego()
                disabled: not (root.rom_cargado and root.servidor_elegido) or root.loading

            Label:
                id: output_label
                text: ""
                size_hint_y: None
                height: self.texture_size[1]

        Image:
            id: loading_spinner
            source: 'resources/image/spinner.zip'
            size_hint: 0.15, 0.15
            size: 70, 70
            pos_hint: {"center_x": 0.5, "center_y": 0.5}
            opacity: 1 if root.loading else 0
            allow_stretch: True
            keep_ratio: True
            anim_delay: -1    
            anim_loop: 0      

        ImageButton:
            id: menuButton
            source: 'resources/image/settings.png'
            size_hint: 0.1, 0.1
            pos_hint: {"x": 0.88, "y": 0.91}
            on_release: root.open_menu(self)
            opacity: 1 if (ENV in ["local", "desarrollo"] or platform == "android") else 0
            disabled: not (ENV in ["local", "desarrollo"] or platform == "android")
